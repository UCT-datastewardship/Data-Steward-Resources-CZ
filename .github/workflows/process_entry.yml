- name: Append to CSV
        run: |
          # 1. Path to your file
          FILE="data/data.csv"

          # 2. Capture Form Data
          TITLE="${{ steps.parse.outputs.title }}"
          LINK="${{ steps.parse.outputs.link }}"
          
          # We join checkboxes with a semicolon so they don't break the CSV commas
          CAT=$(echo "${{ steps.parse.outputs.categories }}" | tr '\n' ';')
          KNOW="${{ steps.parse.outputs.knowledge_level }}"
          TIME="${{ steps.parse.outputs.time_needed }}"
          LANG="${{ steps.parse.outputs.language }}"
          KEYS=$(echo "${{ steps.parse.outputs.keywords }}" | tr '\n' ';')
          INFO="${{ steps.parse.outputs.information }}"

          # 3. THE EXACT COMMA MAP
          # Based on HEADER2, the sub-categories start at the 20th column.
          # Structure: Title(1), Link(2), Empty(3-19), Cats(20), Keywords(21+), etc.
          # To keep it simple and safe for your layout, we format it like this:
          
          NEW_ROW="$TITLE,$LINK,,,,,,,,,,,,,,,,,,$CAT,$KEYS,$KNOW,$TIME,$LANG,$INFO"
          
          # 4. Append to the real file
          echo "$NEW_ROW" >> "$FILE"
